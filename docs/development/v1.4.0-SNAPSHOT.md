# v1.4.0-SNAPSHOT — 成就系统

> 基于 v1.3.0-SNAPSHOT 开发，尚未正式发布

## 新增功能

### 成就系统（Advancements）

为心灵空间模组加入 MC 原生成就系统，在玩家完成关键里程碑时弹出成就通知。

#### 成就树

```
开窍 (root, task) ─── 使用空间球
└── 袖里有乾坤 (task) ─── 首次进入空间
    ├── 空间系初学者 (task) ─── 首次空间替换
    └── 壶中有日月 (goal) ─── 首次空间升级
        └── 万里山河图 (goal) ─── 空间 ≥ 128
            └── 至尊仙窍 (challenge) ─── 空间 ≥ 512
```

#### 成就列表

| ID | 中文标题 | 英文标题 | 图标 | 类型 | 触发条件 |
|----|---------|---------|------|------|---------|
| `awakening` | 开窍 | Awakening | `minddomain:space_ball` | task (root) | 使用空间球 |
| `universe_in_sleeve` | 袖里有乾坤 | A Universe Up One's Sleeve | `minecraft:ender_pearl` | task | 进入空间 |
| `space_beginner` | 空间系初学者 | Space Novice | `minecraft:ender_eye` | task | 空间替换 |
| `sun_moon_in_gourd` | 壶中有日月 | Sun & Moon in the Gourd | `minecraft:experience_bottle` | goal | 空间升级 |
| `vast_landscape` | 万里山河图 | Vast Landscape Scroll | `minecraft:filled_map` | goal | 空间 ≥ 128 |
| `supreme_immortal_space` | 至尊仙窍 | Supreme Immortal Aperture | `minecraft:nether_star` | challenge | 空间 ≥ 512 |

#### 技术实现

- 所有成就使用 `minecraft:impossible` 触发器，通过代码程序化授予（`ModAdvancements.grant()`）
- 授予操作幂等：`grantCriterion()` 在已完成时返回 false，不重复显示 toast
- 成就进度由 MC 原生 `PlayerAdvancementTracker` 管理，自动持久化
- `checkSizeMilestones()` 统一处理空间升级和继承大空间（size ≥ 128/512）的里程碑检查

---

## 新增文件

| 文件 | 说明 |
|------|------|
| `advancement/ModAdvancements.kt` | 成就系统工具对象（ID 常量、grant、checkSizeMilestones） |
| `data/minddomain/advancement/*.json` | 6 个成就 JSON 定义文件 |
| `docs/development/advancements.md` | 成就记录表文档 |

## 变更文件

| 文件 | 变更内容 |
|------|----------|
| `Minddomain.kt` | `onInitialize()` 中新增 `ModAdvancements.register()` |
| `SpaceBallItem.kt` | `use()` 中授予"开窍"成就并检查大小里程碑 |
| `ModNetworking.kt` | `handleEnterSpace()` 授予"袖里有乾坤"，`handleSwapSpace()` 授予"空间系初学者" |
| `ModEvents.kt` | `onPlayerGainExperience()` 授予"壶中有日月"并检查大小里程碑 |
| `lang/zh_cn.json` | 新增 12 条成就翻译（6 标题 + 6 描述） |
| `lang/en_us.json` | 新增 12 条成就翻译（6 标题 + 6 描述） |
| `gradle.properties` | `mod_version` 1.3.0-SNAPSHOT → 1.4.0-SNAPSHOT |
